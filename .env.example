# Fees Manager Backend Environment Variables
# Copy this file to .env and fill in your actual values

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Application environment
NODE_ENV=development
PORT=3001
TZ=Asia/Karachi

# Frontend URL for CORS
FRONTEND_URL=http://localhost:5173

# Logging level (error, warn, info, debug)
LOG_LEVEL=info

# JWT Configuration (for internal API authentication)
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=24h

# Rate limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# =============================================================================
# FIREBASE CONFIGURATION
# =============================================================================

# Firebase Admin SDK configuration
FIREBASE_PROJECT_ID=your-project-id
FIREBASE_CLIENT_EMAIL=your-service-account-email
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nyour-private-key\n-----END PRIVATE KEY-----\n"
FIREBASE_DATABASE_URL=https://your-project-id-default-rtdb.firebaseio.com

# Firebase Web API Key (for client operations)
FIREBASE_API_KEY=your-web-api-key

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# Redis connection
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DATABASE=0

# Redis connection pool settings
REDIS_POOL_MIN=2
REDIS_POOL_MAX=10
REDIS_POOL_ACQUIRE_TIMEOUT=30000
REDIS_POOL_CREATE_TIMEOUT=30000
REDIS_POOL_DESTROY_TIMEOUT=5000
REDIS_POOL_IDLE_TIMEOUT=30000
REDIS_POOL_REAP_INTERVAL=1000
REDIS_POOL_CREATE_RETRY_INTERVAL=200

# Redis queue settings
REDIS_QUEUE_NAME=whatsapp-messages
REDIS_QUEUE_CONCURRENCY=1
REDIS_QUEUE_ATTEMPTS=3
REDIS_QUEUE_BACKOFF_DELAY=2000
REDIS_QUEUE_REMOVE_ON_COMPLETE=100
REDIS_QUEUE_REMOVE_ON_FAIL=50
REDIS_QUEUE_DELAY_BETWEEN_JOBS=2000

# Redis rate limiting settings
REDIS_RATE_LIMIT_PREFIX=rate_limit
REDIS_RATE_LIMIT_DEFAULT_TTL=3600
REDIS_RATE_LIMIT_HOURLY_TTL=3600
REDIS_RATE_LIMIT_DAILY_TTL=86400
REDIS_RATE_LIMIT_DELAY_TTL=3600

# =============================================================================
# WPPCONNECT CONFIGURATION
# =============================================================================

# WPPConnect server configuration
WPPCONNECT_SERVER_URL=http://localhost:21465
WPPCONNECT_SECRET_KEY=My53cr3tKY
WPPCONNECT_API_TOKEN_WEBHOOK=
WPPCONNECT_WEBHOOK_URL=

# WhatsApp session settings
WHATSAPP_SESSION_NAME=session
WHATSAPP_WEBHOOK_BASE_URL=http://localhost:3001/webhook/whatsapp
WHATSAPP_WEBHOOK_AUTO_DOWNLOAD_MEDIA=false
WHATSAPP_WEBHOOK_READ_MESSAGE=false
WHATSAPP_WEBHOOK_ALL_UNREAD_ON_START=false

# =============================================================================
# AUTOMATION CONFIGURATION
# =============================================================================

# Automation schedule settings
AUTOMATION_CHECK_INTERVAL_MINUTES=5
AUTOMATION_MAX_CONCURRENT_JOBS=3
AUTOMATION_DEFAULT_RETRY_ATTEMPTS=3
AUTOMATION_DEFAULT_RETRY_DELAY_MS=30000

# Rate limiting for automation
AUTOMATION_RATE_LIMIT_ENABLED=true
AUTOMATION_HOURLY_MESSAGE_LIMIT=50
AUTOMATION_DAILY_MESSAGE_LIMIT=200
AUTOMATION_MIN_DELAY_BETWEEN_MESSAGES_MS=5000
AUTOMATION_MAX_DELAY_BETWEEN_MESSAGES_MS=30000

# Business hours
AUTOMATION_BUSINESS_HOURS_ENABLED=true
AUTOMATION_BUSINESS_START_HOUR=9
AUTOMATION_BUSINESS_END_HOUR=18
AUTOMATION_BUSINESS_TIMEZONE=Asia/Karachi
AUTOMATION_WORKING_DAYS=1,2,3,4,5

# Message template settings
AUTOMATION_MESSAGE_PLACEHOLDER_PREFIX={{
AUTOMATION_MESSAGE_PLACEHOLDER_SUFFIX=}}
AUTOMATION_MESSAGE_MAX_LENGTH=1000

# =============================================================================
# MONITORING & LOGGING
# =============================================================================

# Winston logging configuration
LOG_FILE_PATH=./logs/backend.log
LOG_FILE_MAX_SIZE=10m
LOG_FILE_MAX_FILES=7
LOG_FILE_DATE_PATTERN=YYYY-MM-DD

# Error logging
LOG_ERROR_FILE_PATH=./logs/error.log
LOG_COMBINED_FILE_PATH=./logs/combined.log

# Performance monitoring
PERFORMANCE_MONITORING_ENABLED=true
PERFORMANCE_SLOW_REQUEST_THRESHOLD_MS=2000

# Health check configuration
HEALTH_CHECK_INTERVAL_MS=30000
HEALTH_CHECK_TIMEOUT_MS=5000

# =============================================================================
# SECURITY
# =============================================================================

# CORS settings
CORS_ALLOWED_ORIGINS=http://localhost:5173,https://yourdomain.com
CORS_ALLOW_CREDENTIALS=true

# Security headers
SECURITY_HEADERS_ENABLED=true
SECURITY_CONTENT_SECURITY_POLICY_ENABLED=true

# Request size limits
REQUEST_SIZE_LIMIT=10mb
REQUEST_UPLOAD_LIMIT=50mb

# Session settings
SESSION_SECRET=your-session-secret-key
SESSION_MAX_AGE_MS=86400000
